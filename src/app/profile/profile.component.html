<!-- Only show cards-container if welcome message is hidden -->
<div class="cards-container" *ngIf="isHiddenWelcomeMessage">
  <mat-card class="profile-card">
    <!-- Dynamic message -->
    <h2 class="form-title" *ngIf="!isHiddenSignInMessage">Sign In</h2>
    <h2 class="form-title" *ngIf="!isHiddenSignUpMessage">Sign Up</h2>
    <mat-card-header>
      <mat-card-title>Sign In with Google</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div id="google-signin-container" class="google-signin-container">
        <script src="https://accounts.google.com/gsi/client" async></script>
        <div id="g_id_onload"
             data-client_id="763839777363-2tclimqvmlkkagk6j5d14me4ec4iq2hl.apps.googleusercontent.com"
             data-context="signin"
             data-ux_mode="popup"
             data-callback="handleCredentialResponse"
             data-auto_prompt="false">
        </div>
        <div class="g_id_signin"
             data-type="standard"
             data-shape="rectangular"
             data-theme="outline"
             data-text="signin_with"
             data-size="large"
             data-logo_alignment="left">
        </div>
      </div>
      <div class="divider">
        <span>OR</span>
      </div>
      <!-- Changing Form Section -->
      <!-- Sign Up Form -->
      <div class="form-container" *ngIf="!isHiddenSignUpMessage">
        <form [formGroup]="profileFormForSignUp" (ngSubmit)="onSubmitSignUp()">
          <mat-form-field appearance="fill">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" placeholder="Enter your name">
            <mat-error *ngIf="profileFormForSignUp.get('name')?.hasError('required')">
              Name is required
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" placeholder="Enter your email">
            <mat-error *ngIf="profileFormForSignUp.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="profileFormForSignUp.get('email')?.hasError('email')">
              Please enter a valid email address
            </mat-error>
          </mat-form-field>
          <button mat-raised-button color="primary" type="submit" [disabled]="!profileFormForSignUp.valid">
            Sign Up With Verification Code
          </button>
          <div class="toggle-form">
            Already have an account? <button mat-button (click)="toggleForms()">Sign In</button>
          </div>
        </form>
      </div>
      <!-- Sign In Form -->
      <div class="form-container" *ngIf="!isHiddenSignInMessage">
        <form [formGroup]="profileFormForSignIn" (ngSubmit)="onSubmitSignIn()">
          <mat-form-field appearance="fill">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" placeholder="Enter your name">
            <mat-error *ngIf="profileFormForSignIn.get('name')?.hasError('required')">
              Name is required
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" placeholder="Enter your email">
            <mat-error *ngIf="profileFormForSignIn.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="profileFormForSignIn.get('email')?.hasError('email')">
              Please enter a valid email address
            </mat-error>
          </mat-form-field>
          <button mat-raised-button color="primary" type="submit" [disabled]="!profileFormForSignIn.valid">
            Sign In With Verification Code
          </button>
          <div class="toggle-form">
            Don't have an account? <button mat-button (click)="toggleForms()">Sign Up</button>
          </div>
        </form>
      </div>
    </mat-card-content>
  </mat-card>
</div>
<!-- Signed-in message -->
<div class="signed-in-message" *ngIf="!isHiddenWelcomeMessage">
  <mat-card class="profile-card">
    <mat-card-content>
      <h2 class="form-title">You are signed in!</h2>
      <div class="user-details">
        <p><strong>Name:</strong> {{ dataService.theClient?.name }}</p>
        <p><strong>Email:</strong> {{ dataService.theClient?.email }}</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<!-- DEBUG: Show verification state -->
<p style="color: red;">DEBUG: isHiddenVerificationMessage = {{ isHiddenVerificationMessage }}</p>

<!-- Minimal debug block for visibility -->
<div *ngIf="!isHiddenVerificationMessage" style="background: yellow; padding: 20px;">
  <b>DEBUG: This should show when verification is needed!</b>
</div>

<!-- Verification form is now outside the cards-container and signed-in message blocks -->
<div class="card" *ngIf="!isHiddenVerificationMessage">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Enter Verification Code</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="verificationForm" (ngSubmit)="onSubmitVerification()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Verification Code</mat-label>
          <input matInput formControlName="verificationCode" placeholder="Enter the 6-digit code">
          <mat-error *ngIf="verificationForm.get('verificationCode')?.hasError('required')">
            Verification code is required
          </mat-error>
          <mat-error *ngIf="verificationForm.get('verificationCode')?.hasError('minlength') || verificationForm.get('verificationCode')?.hasError('maxlength')">
            Code must be 6 digits
          </mat-error>
        </mat-form-field>
        <button mat-raised-button color="primary" type="submit" [disabled]="!verificationForm.valid">
          Verify
        </button>
      </form>
    </mat-card-content>
  </mat-card>
</div>
  
  

